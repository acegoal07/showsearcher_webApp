class SearchSettings{constructor(){this.page=1,this.adultContent=!1,this.movieOrTv="0"}}const searchSettings=new SearchSettings;function search(e){let t;t=1==searchSettings.movieOrTv?`https://api.themoviedb.org/3/search/movie?query=${e}&include_adult=${searchSettings.adultContent}&page=${searchSettings.page}`:2==searchSettings.movieOrTv?`https://api.themoviedb.org/3/search/tv?query=${e}&include_adult=${searchSettings.adultContent}&page=${searchSettings.page}`:`https://api.themoviedb.org/3/search/multi?query=${e}&include_adult=${searchSettings.adultContent}&page=${searchSettings.page}`;const a={method:"GET",headers:{accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiI1Yzk4MTAxNjk0OTQ2MmE4NmJlNTA2NTc2Yjg1ZjZlNCIsInN1YiI6IjY2MjFkMDY1Y2NkZTA0MDE4ODA2NDA4MCIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.xUExDZr1UbIizmXNPNqotICIYYKTQfRltq2uIgq9qjI"}};fetch(t,a).then((e=>{if(e.ok)return e.json();throw new Error("Network response was not ok")})).then((e=>{const t=document.querySelector("#search-results");t.innerHTML="",e.results.forEach((e=>{if("person"===e.media_type)return;const n=document.createElement("div");n.classList.add("col");const i=document.createElement("div");if(i.classList.add("card","bg-body-tertiary","justify-content-center","h-100","shadow-lg","border-0"),n.appendChild(i),e.poster_path){const t=document.createElement("img");t.classList.add("card-img"),t.src=`https://image.tmdb.org/t/p/w500${e.poster_path}`,t.alt=e.title||e.name||e.original_title||e.original_name,i.appendChild(t)}else{const t=document.createElement("div");t.classList.add("placeholder-card-img");const a=document.createElement("img");a.classList.add("card-img"),a.src="assets/images/FillerImage.webp",a.alt=e.title||e.name||e.original_title||e.original_name,t.appendChild(a);const n=document.createElement("div");n.classList.add("placeholder-card-img-text");const r=document.createElement("div");r.classList.add("fw-bold","fs-5","pb-1"),r.textContent=e.title||e.name||e.original_title||e.original_name,n.appendChild(r);const s=document.createElement("div");s.classList.add("fs-6","text-muted","pb-1"),s.textContent=e.release_date||e.first_air_date||"No release date available",n.appendChild(s);const o=document.createElement("div");o.classList.add("fs-6","text-muted"),e.overview?o.textContent=`${e.overview.substring(0,150)} ...`:o.textContent="No overview available",n.appendChild(o);const c=document.createElement("div");c.classList.add("fs-6","text-muted","fw-bold","pt-1"),c.textContent="Click to see more",n.appendChild(c),t.appendChild(n),i.appendChild(t)}i.addEventListener("click",(()=>{let t;if("movie"===e.media_type||1==searchSettings.movieOrTv)t=`https://api.themoviedb.org/3/movie/${e.id}/watch/providers`;else{if("tv"!==e.media_type&&2!=searchSettings.movieOrTv)return;t=`https://api.themoviedb.org/3/tv/${e.id}/watch/providers`}fetch(t,a).then((e=>{if(e.ok)return e.json();throw new Error("Network response was not ok")})).then((t=>{let n;if("movie"===e.media_type||1==searchSettings.movieOrTv)n="https://api.themoviedb.org/3/genre/movie/list?language=en";else{if("tv"!==e.media_type&&2!=searchSettings.movieOrTv)return;n="https://api.themoviedb.org/3/genre/tv/list?language=en"}fetch(n,a).then((e=>{if(e.ok)return e.json();throw new Error("Network response was not ok")})).then((t=>{const a=[];e.genre_ids.forEach((e=>{const n=t.genres.find((t=>t.id===e));n&&a.push(n.name)})),document.querySelector("#show-title").textContent=e.title||e.name||e.original_title||e.original_name,document.querySelector("#show-release-date").textContent=e.release_date||e.first_air_date||"No release date available",document.querySelector("#show-description").textContent=e.overview||"No overview available",document.querySelector("#show-genres").textContent=a.join(", ")||"No genres available",document.querySelector("#show-rating").textContent=e.vote_average||"No rating available",$("#showData").modal("show")})).catch((e=>{}))})).catch((e=>{}))})),t.appendChild(n)}))})).catch((e=>{}))}window.addEventListener("load",(function(){let e;const t=document.querySelector("#search-input");t.value=null,t.addEventListener("keyup",(()=>{clearTimeout(e),t.value&&(e=setTimeout((()=>search(t.value.trim())),200))})),searchSettings.adultContent=document.querySelector("#adult-items-settings").value,document.querySelector("#adult-items-settings").addEventListener("change",(()=>{searchSettings.adultContent=document.querySelector("#adult-items-settings").value,search(t.value.trim())})),searchSettings.movieOrTv=document.querySelector("#movie-or-tv-settings").value,document.querySelector("#movie-or-tv-settings").addEventListener("change",(()=>{searchSettings.movieOrTv=document.querySelector("#movie-or-tv-settings").value,search(t.value.trim())}))}));